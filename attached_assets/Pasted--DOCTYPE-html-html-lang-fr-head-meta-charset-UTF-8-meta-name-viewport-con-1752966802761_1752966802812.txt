<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Auxiliaire - Leader du Déménagement et Conseils au Maroc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- General & Color Palette --- */
        :root {
            --brand-blue: #00A6ED;
            --brand-yellow: #FFB400;
            --brand-dark: #212529;
            --brand-light: #F8F9FA;
            --brand-gray: #6c757d;
            
            --bg-color: var(--brand-light);
            --text-color: var(--brand-dark);
            --card-bg: white;
            --border-color: #e2e8f0;
        }

        .dark-mode {
            --bg-color: #1a202c;
            --text-color: #e2e8f0;
            --card-bg: #2d3748;
            --border-color: #4a5568;
        }

        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .hero-bg { background-color: var(--brand-blue); background-image: linear-gradient(135deg, var(--brand-blue) 0%, #007AB3 100%); }
        .cta-button { transition: all 0.3s ease; background-color: var(--brand-yellow); }
        .cta-button:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); filter: brightness(1.05); }
        .nav-link::after { background-color: var(--brand-yellow); }

        /* --- Theme Switcher --- */
        #theme-switcher { cursor: pointer; }
        .theme-icon { display: none; }
        body:not(.dark-mode) .sun-icon { display: block; }
        body.dark-mode .moon-icon { display: block; }

        /* --- SPA Navigation & Modals (unchanged) --- */
        .nav-link{position:relative;transition:color .3s}.nav-link::after{content:'';position:absolute;width:0;height:2px;bottom:-4px;left:50%;transition:all .3s ease-out;transform:translateX(-50%)}.nav-link:hover::after,.nav-link.active::after{width:100%}.page-view{display:none}.page-view.active{display:block;animation:fadeIn .5s ease-in-out}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        #service-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}#service-modal.open{opacity:1;visibility:visible}#service-modal-content{background-color:var(--card-bg);padding:2rem;border-radius:15px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;position:relative;transform:scale(.95);transition:transform .3s ease}#service-modal.open #service-modal-content{transform:scale(1)}#service-modal-close{position:absolute;top:1rem;right:1rem;cursor:pointer;width:30px;height:30px;background-color:#f1f5f9;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;line-height:1;color:#64748b}

        /* --- Honeycomb Quote Form --- */
        .honeycomb-container{display:flex;flex-wrap:wrap;justify-content:center;max-width:800px;margin:2rem auto}.honeycomb-cell{flex:0 0 150px;height:170px;margin:28px 5px;position:relative;cursor:pointer;transition:transform .2s}.honeycomb-cell:hover{transform:scale(1.05)}.honeycomb-cell .hexagon{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--border-color);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);transition:background-color .3s}.honeycomb-cell.answered .hexagon{background-color:var(--brand-yellow)}.honeycomb-cell .hex-content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;width:80%;color:var(--text-color);font-weight:600;font-size:.9rem}.honeycomb-cell.answered .hex-content{color:white}.honeycomb-form-step{display:none;padding:1.5rem;background:var(--card-bg);border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,0.1);margin-top:1.5rem}.honeycomb-form-step.active{display:block}#devis-final-actions{display:none}

        /* --- Chatbot (colors adapted) --- */
        #chatbot-container{position:fixed;bottom:2rem;right:2rem;z-index:1000}#chatbot-toggle{background-color:var(--brand-blue);color:white;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.2);transition:transform .3s ease}#chatbot-toggle:hover{transform:scale(1.1)}#chatbot-window{position:absolute;bottom:80px;right:0;width:350px;height:450px;background-color:var(--card-bg);border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.15);display:flex;flex-direction:column;overflow:hidden;transform:scale(.95) translateY(10px);opacity:0;visibility:hidden;transition:all .3s ease-out}#chatbot-window.open{transform:scale(1) translateY(0);opacity:1;visibility:visible}#chat-header{background-color:var(--brand-blue);color:white;padding:1rem;font-weight:700;text-align:center}#chat-messages{flex-grow:1;padding:1rem;overflow-y:auto;display:flex;flex-direction:column;gap:.75rem}.chat-message{padding:.75rem 1rem;border-radius:10px;max-width:80%;line-height:1.4;word-wrap:break-word}.bot-message{background-color:#f1f5f9;color:var(--brand-dark);align-self:flex-start}.user-message{background-color:var(--brand-blue);color:white;align-self:flex-end}#chat-input-container{border-top:1px solid var(--border-color);padding:.75rem;display:flex}#chat-input{flex-grow:1;border:1px solid var(--border-color);border-radius:20px;padding:.5rem 1rem;outline:0;transition:border-color .2s ease;background-color:var(--bg-color);color:var(--text-color)}#chat-input:focus{border-color:var(--brand-blue)}#chat-send{background-color:var(--brand-blue);color:white;border:none;border-radius:50%;width:40px;height:40px;margin-left:.5rem;cursor:pointer;font-weight:700;transition:background-color .2s ease}#chat-send:hover{background-color:#007AB3}.typing-indicator{display:flex;align-items:center;padding:.75rem 1rem}.typing-indicator span{height:8px;width:8px;margin:0 2px;background-color:#9ca3af;border-radius:50%;display:inline-block;animation:bob 1.5s infinite ease-in-out}@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}.typing-indicator span:nth-child(2){animation-delay:.2s}.typing-indicator span:nth-child(3){animation-delay:.4s}

        /* Generic card and input styles for theme */
        .card { background-color: var(--card-bg); }
        .input-field { background-color: var(--bg-color); color: var(--text-color); border: 1px solid var(--border-color); }
        .input-field:focus { border-color: var(--brand-blue); }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="card shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="text-2xl font-bold text-[var(--brand-blue)] page-link">Mon Auxiliaire</a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#home" class="nav-link page-link active text-gray-600 hover:text-[var(--brand-blue)]">Accueil</a>
                <a href="#services" class="nav-link page-link text-gray-600 hover:text-[var(--brand-blue)]">Services</a>
                <a href="#hub" class="nav-link page-link text-gray-600 hover:text-[var(--brand-blue)]">Le Hub</a>
                <a href="#about" class="nav-link page-link text-gray-600 hover:text-[var(--brand-blue)]">À Propos</a>
                <a href="#contact" class="nav-link page-link text-gray-600 hover:text-[var(--brand-blue)]">Contact</a>
                <a href="#devis" class="text-white font-bold py-2 px-5 rounded-full cta-button page-link">Devis Gratuit</a>
                <div id="theme-switcher" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <svg class="w-6 h-6 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <svg class="w-6 h-6 moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </div>
            </div>
             <div class="md:hidden flex items-center gap-2">
                <div id="mobile-theme-switcher" class="p-2 rounded-full"><svg class="w-6 h-6 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><svg class="w-6 h-6 moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg></div>
                <button id="mobile-menu-button" class="text-gray-600 focus:outline-none"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 card">
            <!-- Mobile menu links -->
        </div>
    </header>

    <main>
        <!-- All page views here -->
        <div id="home-view" class="page-view active">
            <section class="hero-bg text-white"><div class="container mx-auto px-6 py-20 md:py-32 text-center"><h1 class="text-4xl md:text-6xl font-black tracking-tight leading-tight">Le déménagement, la confiance en plus.</h1><p class="mt-4 text-lg md:text-xl max-w-3xl mx-auto opacity-90">Votre partenaire de confiance pour tous vos projets de déménagement au Maroc. Simple, rapide et sécurisé.</p><a href="#devis" class="page-link mt-8 inline-block bg-white text-[var(--brand-blue)] font-bold text-lg py-4 px-10 rounded-full cta-button !bg-white">Obtenir mon devis personnalisé</a></div></section>
            <section class="py-16 md:py-24"><div class="container mx-auto px-6"><div class="text-center mb-12"><h2 class="text-3xl md:text-4xl font-bold">Des solutions complètes pour chaque besoin</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Du studio à la multinationale, nous avons l'expertise pour un déménagement réussi.</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" id="home-services-container"></div></div></section>
            <section class="bg-white py-16 md:py-24 card"><div class="container mx-auto px-6"><div class="text-center mb-12"><h2 class="text-3xl md:text-4xl font-bold">La parole à nos clients</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Leur satisfaction est notre plus grande fierté.</p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div class="bg-gray-100 p-8 rounded-lg dark:bg-gray-700"><p class="text-gray-600 dark:text-gray-300 mb-4">"Service impeccable du début à la fin. L'équipe était professionnelle, ponctuelle et incroyablement efficace. Je recommande Mon Auxiliaire les yeux fermés !"</p><p class="font-bold text-right">- Fatima Z., Casablanca</p></div><div class="bg-gray-100 p-8 rounded-lg dark:bg-gray-700"><p class="text-gray-600 dark:text-gray-300 mb-4">"Le transfert de nos bureaux s'est fait sans aucun souci. La planification était parfaite et l'impact sur notre activité a été minime. Un grand merci."</p><p class="font-bold text-right">- M. Alami, Directeur, Rabat</p></div><div class="bg-gray-100 p-8 rounded-lg dark:bg-gray-700"><p class="text-gray-600 dark:text-gray-300 mb-4">"J'appréhendais mon déménagement international, mais Mon Auxiliaire a tout géré de main de maître, y compris les formalités douanières."</p><p class="font-bold text-right">- Sophie D., de Tanger vers la France</p></div></div></div></section>
        </div>
        <div id="services-view" class="page-view"><div class="container mx-auto px-6 py-16 md:py-24"><div class="text-center mb-12"><h2 class="text-4xl md:text-5xl font-bold">Nos Services sur Mesure</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Une gamme complète de prestations pour répondre à toutes les exigences.</p></div><div id="detailed-services-container"></div></div></div>
        <div id="hub-view" class="page-view"><div class="container mx-auto px-6 py-16 md:py-24"><div class="text-center mb-12"><h2 class="text-4xl md:text-5xl font-bold">Le Hub du Déménagement</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Votre source d'information de référence. Astuces et guides pour un déménagement maîtrisé.</p></div><div id="hub-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div></div>
        <div id="hub-article-view" class="page-view"></div>
        <div id="about-view" class="page-view"><div class="container mx-auto px-6 py-16 md:py-24 space-y-16"><div class="grid md:grid-cols-2 gap-12 items-center"><div><h2 class="text-3xl md:text-4xl font-bold">Notre histoire, vos garanties.</h2><p class="mt-4 text-lg text-[var(--brand-gray)]">Depuis plus de 15 ans, Mon Auxiliaire s'est imposé comme un acteur majeur du déménagement au Maroc. Fondée par des experts, notre mission est de vous offrir une tranquillité d'esprit absolue.</p><ul class="mt-6 space-y-4"> <li class="flex items-start"><span class="text-green-500 mr-3">✔</span> <b>Professionnalisme :</b> Des équipes formées aux meilleures pratiques.</li><li class="flex items-start"><span class="text-green-500 mr-3">✔</span> <b>Fiabilité :</b> Respect des délais et des engagements.</li><li class="flex items-start"><span class="text-green-500 mr-3">✔</span> <b>Sécurité :</b> Matériel de pointe et assurance complète.</li></ul></div><div class="p-4 rounded-lg shadow-xl card"><img src="https://images.unsplash.com/photo-1549923746-c502d488b3ea?q=80&w=2071&auto=format&fit=crop" alt="Notre équipe d'experts en logistique" class="rounded-lg object-cover w-full h-full"></div></div><div class="text-center"><h2 class="text-3xl md:text-4xl font-bold">Une présence nationale à votre service</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Nos agences sont stratégiquement situées pour couvrir l'ensemble du territoire.</p><div class="mt-8 p-4 rounded-lg shadow-lg card"><img src="https://i.imgur.com/gA8E7v9.png" alt="Carte de nos agences au Maroc" class="w-full h-auto rounded-md"></div></div></div></div>
        <div id="contact-view" class="page-view"><div class="container mx-auto px-6 py-16 md:py-24"><div class="text-center mb-12"><h2 class="text-4xl md:text-5xl font-bold">Contactez-nous</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Une question ? Un projet ? Notre équipe est à votre écoute.</p></div><div class="grid md:grid-cols-2 gap-12 p-8 rounded-lg shadow-xl card"><form id="contact-form"><h3 class="text-2xl font-bold mb-6">Envoyez-nous un message</h3><div class="space-y-4"><input class="w-full p-3 rounded-lg input-field" type="text" placeholder="Votre nom" required><input class="w-full p-3 rounded-lg input-field" type="email" placeholder="Votre email" required><textarea class="w-full p-3 rounded-lg input-field" rows="5" placeholder="Votre message" required></textarea><button type="submit" class="w-full bg-[var(--brand-blue)] text-white font-bold py-3 px-6 rounded-full cta-button !bg-[var(--brand-blue)]">Envoyer</button></div></form><div class="space-y-6"><h3 class="text-2xl font-bold">Nos coordonnées</h3><p><strong>Téléphones :</strong> 06 61 20 69 29 / 08 02 00 73 73</p><p><strong>Email :</strong> contact@monauxiliaire.com</p><p><strong>Adresse Principale :</strong> 14 Rue Farabi, Plage, Tanger – Maroc</p><div><h4 class="font-bold mb-2">Suivez-nous :</h4><div class="flex space-x-4"><a href="#" class="text-[var(--brand-gray)] hover:text-[var(--brand-blue)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v2.385z"/></svg></a><a href="#" class="text-[var(--brand-gray)] hover:text-[var(--brand-blue)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664 4.771 4.919 4.919 1.266.058 1.644.07 4.85.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg></a><a href="#" class="text-[var(--brand-gray)] hover:text-[var(--brand-blue)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"/></svg></a></div></div></div></div></div></div>
        <div id="devis-view" class="page-view">
           <div class="container mx-auto px-6 py-16 md:py-24">
                <div class="text-center mb-12"><h2 class="text-4xl md:text-5xl font-bold">Obtenez votre Devis Interactif</h2><p class="mt-3 text-[var(--brand-gray)] max-w-2xl mx-auto">Cliquez sur chaque hexagone pour compléter votre demande. C'est simple et rapide !</p></div>
                <div id="devis-form-container">
                    <div class="honeycomb-container" id="honeycomb-grid"></div>
                    <div id="honeycomb-step-container"></div>
                    <div id="devis-final-actions" class="text-center mt-8 p-6 rounded-lg card shadow-lg">
                        <h3 class="text-2xl font-bold mb-4">Votre demande est prête !</h3>
                        <p class="mb-6 text-[var(--brand-gray)]">Vous pouvez maintenant nous l'envoyer par email ou nous contacter directement sur WhatsApp.</p>
                        <div class="flex flex-col sm:flex-row justify-center gap-4">
                            <a id="devis-mailto-btn" class="text-white font-bold py-3 px-6 rounded-full cta-button !bg-[var(--brand-blue)] flex items-center justify-center gap-2" href="#"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>Envoyer par Email</a>
                            <a id="devis-whatsapp-btn" class="text-white font-bold py-3 px-6 rounded-full cta-button !bg-green-500 flex items-center justify-center gap-2" href="#" target="_blank"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.58-1.452L.057 24zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.803 6.122l-1.24 4.525 4.647-1.238z"/></svg>Contacter sur WhatsApp</a>
                        </div>
                    </div>
                </div>
           </div>
        </div>
    </main>

    <!-- Footer, Modals, Chatbot -->
    <footer class="bg-gray-800 text-white pt-12 pb-8">
        <!-- Footer content is the same, just inherits dark theme text colors -->
    </footer>
    <div id="service-modal"><div id="service-modal-overlay" class="absolute inset-0"></div><div id="service-modal-content"><button id="service-modal-close" aria-label="Fermer">&times;</button><div id="service-modal-body"></div></div></div>
    <div id="chatbot-container"><div id="chatbot-window"><div id="chat-header">Alex - Assistant Déménagement</div><div id="chat-messages"></div><div id="chat-input-container"><input type="text" id="chat-input" placeholder="Posez votre question..."><button id="chat-send">→</button></div></div><div id="chatbot-toggle"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M20.285 2l-1.871.467-1.58 3.56L14.755 3.5l-1.923.954L16.5 12h-9l3.668-7.546-1.923-.954-2.079 2.527-1.58-3.56L3.715 2 2 14.333V22h20V14.333L20.285 2zM8 18H4v-2h4v2zm12 0h-4v-2h4v2z"/></svg></div></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- THEME SWITCHER LOGIC ---
        const themeSwitcher = document.getElementById('theme-switcher');
        const mobileThemeSwitcher = document.getElementById('mobile-theme-switcher');
        const body = document.body;

        const applyTheme = (theme) => {
            if (theme === 'dark') {
                body.classList.add('dark-mode');
            } else {
                body.classList.remove('dark-mode');
            }
        };

        const toggleTheme = () => {
            const newTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        };

        themeSwitcher.addEventListener('click', toggleTheme);
        mobileThemeSwitcher.addEventListener('click', toggleTheme);
        
        // Apply saved theme on load
        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);

        // --- DATABASE (unchanged) ---
        const services = [
            { id: 'particuliers', title: 'Déménagement Particuliers', icon: '🏠', description: 'Une prise en charge complète pour que votre changement de domicile soit une expérience sereine et positive.', details: 'De l\'emballage soigné de vos biens les plus fragiles au transport sécurisé et au remontage de vos meubles, nous nous occupons de tout.', richDetails: `<h3 class="text-3xl font-bold flex items-center mb-4"><span class="text-5xl mr-4">🏠</span> Déménagement de Particuliers</h3><p class="text-gray-600 dark:text-gray-300 mb-4">Changer de domicile est une étape importante. Notre mission est de la rendre aussi simple et agréable que possible. Nous vous accompagnons avec une prestation clé en main, entièrement personnalisable.</p><ul class="space-y-3 list-disc list-inside"><li><b>Visite technique gratuite :</b> Un de nos conseillers se déplace pour évaluer précisément le volume à déménager et identifier vos besoins spécifiques.</li><li><b>Fourniture de matériel professionnel :</b> Nous vous livrons des cartons de toutes tailles et du matériel de protection.</li><li><b>Emballage/Déballage par nos soins :</b> Confiez-nous l'emballage de vos objets fragiles ou de l'intégralité de vos biens.</li><li><b>Démontage et remontage du mobilier :</b> Nos équipes sont expertes dans le démontage et le remontage de tous types de meubles.</li><li><b>Transport sécurisé :</b> Notre flotte de camions capitonnés et équipés assure un transport en toute sécurité.</li></ul><p class="mt-6 font-semibold">Avec Mon Auxiliaire, votre nouvelle vie commence sans le moindre souci.</p>`},
            { id: 'entreprises', title: 'Déménagement Entreprises', icon: '🏢', description: 'Transfert de bureaux et d\'équipements planifié avec soin pour minimiser l\'impact sur votre activité.', details: 'Nous planifions chaque étape du transfert de vos bureaux, de l\'archivage sécurisé au rebranchement de votre parc informatique.', richDetails: `<h3 class="text-3xl font-bold flex items-center mb-4"><span class="text-5xl mr-4">🏢</span> Déménagement d'Entreprises</h3><p class="text-gray-600 dark:text-gray-300 mb-4">La continuité de votre activité est notre priorité. Nous concevons le transfert de votre entreprise comme une opération chirurgicale, planifiée pour une exécution rapide et efficace.</p><ul class="space-y-3 list-disc list-inside"><li><b>Gestion de projet dédiée :</b> Un chef de projet unique est votre interlocuteur pour coordonner l'ensemble des opérations.</li><li><b>Planification détaillée :</b> Nous établissons un rétroplanning précis et un plan d'implantation de vos nouveaux locaux.</li><li><b>Transfert informatique sécurisé :</b> Déconnexion, emballage spécifique, transport et reconnexion de votre matériel informatique.</li><li><b>Manutention lourde et spécifique :</b> Nous avons l'équipement pour déplacer coffres-forts, machines et équipements lourds.</li><li><b>Gestion des archives :</b> Service d'archivage, de destruction sécurisée ou de transfert de vos archives.</li></ul><p class="mt-6 font-semibold">Minimisez votre temps d'arrêt et assurez une transition transparente pour vos équipes.</p>`},
            { id: 'international', title: 'Déménagement International', icon: '🌍', description: 'Notre expertise logistique et administrative pour un déménagement sans frontières.', details: 'Nous maîtrisons les complexités du déménagement international : formalités douanières, transport, et coordination mondiale.', richDetails: `<h3 class="text-3xl font-bold flex items-center mb-4"><span class="text-5xl mr-4">🌍</span> Déménagement International</h3><p class="text-gray-600 dark:text-gray-300 mb-4">S'expatrier est une aventure. Laissez-nous gérer la complexité logistique. Nous vous accompagnons de porte à porte, partout dans le monde.</p><ul class="space-y-3 list-disc list-inside"><li><b>Expertise Douanière :</b> Nous nous chargeons de toutes les formalités douanières à l'export comme à l'import.</li><li><b>Transport Multimodal :</b> Nous choisissons la meilleure solution (conteneur maritime, caisse aérienne) pour vos biens.</li><li><b>Emballage aux normes internationales :</b> Nous utilisons des matériaux spécifiques pour résister aux longs trajets.</li><li><b>Réseau mondial de partenaires :</b> Nous nous appuyons sur des agents de confiance à destination pour assurer la livraison.</li><li><b>Suivi en temps réel :</b> Vous pouvez suivre l'avancement de votre déménagement à chaque étape clé.</li></ul><p class="mt-6 font-semibold">Votre nouvelle vie à l'étranger commence ici, avec Mon Auxiliaire.</p>`},
            { id: 'garde-meubles', title: 'Service Garde-Meubles', icon: '📦', description: 'Solutions de stockage sécurisées, flexibles et accessibles pour la conservation de vos biens.', details: 'Besoin d\'espace ? Nos conteneurs de stockage individuels et sécurisés sont la solution idéale pour vos meubles et effets personnels.', richDetails: `<h3 class="text-3xl font-bold flex items-center mb-4"><span class="text-5xl mr-4">📦</span> Service Garde-Meubles</h3><p class="text-gray-600 dark:text-gray-300 mb-4">Que ce soit pour quelques semaines ou plusieurs années, nous gardons vos biens en toute sécurité.</p><ul class="space-y-3 list-disc list-inside"><li><b>Sécurité Maximale :</b> Nos entrepôts sont sous alarme et vidéosurveillance 24h/24, 7j/7.</li><li><b>Conteneurs individuels scellés :</b> Vos biens sont stockés dans des caisses en bois individuelles, plombées en votre présence.</li><li><b>Conditions de conservation optimales :</b> Nos locaux sont ventilés et traités contre l'humidité et les nuisibles.</li><li><b>Flexibilité :</b> Louez un espace de stockage pour la durée de votre choix, sans engagement à long terme.</li><li><b>Inventaire détaillé :</b> Un inventaire complet est réalisé à l'entrée et à la sortie de vos biens.</li></ul><p class="mt-6 font-semibold">Libérez de l'espace dans votre vie, nous veillons sur vos souvenirs.</p>`}
        ];
        const blogPosts = [
            { id: 1, title: 'Le Guide Ultime pour Préparer ses Cartons comme un Pro', image: 'https://images.unsplash.com/photo-1587613864429-f6c6a00407a6?q=80&w=2070&auto=format&fit=crop', excerpt: 'Découvrez nos astuces infaillibles pour un emballage efficace, rapide et sécurisé...', content: 'Contenu détaillé de l\'article 1...' },
            { id: 2, title: 'Déménagement au Maroc : Les Démarches Administratives à ne pas Oublier', image: 'https://images.unsplash.com/photo-1556742044-53ed7d3e1558?q=80&w=2070&auto=format&fit=crop', excerpt: 'Changement d\'adresse, résiliation de contrats... La checklist complète pour une transition sans stress.', content: 'Contenu détaillé de l\'article 2...' },
            { id: 3, title: '5 Conseils pour Choisir la Bonne Société de Déménagement', image: 'https://images.unsplash.com/photo-1576185891363-44b73c46397c?q=80&w=1974&auto=format&fit=crop', excerpt: 'Apprenez à identifier les signes d\'un déménageur fiable pour éviter les mauvaises surprises.', content: 'Contenu détaillé de l\'article 3...' }
        ];

        // --- SPA ROUTING & DYNAMIC CONTENT (adapted for dark mode) ---
        const pageLinks = document.querySelectorAll('.page-link');
        const pageViews = document.querySelectorAll('.page-view');
        const navLinks = document.querySelectorAll('.nav-link');
        const showView = (viewId) => { const targetView = document.getElementById(viewId + '-view'); if (!targetView) return; pageViews.forEach(view => view.classList.remove('active')); targetView.classList.add('active'); navLinks.forEach(link => link.classList.toggle('active', link.getAttribute('href') === '#' + viewId)); window.scrollTo(0, 0); };
        pageLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); const viewId = link.getAttribute('href').substring(1); showView(viewId); document.getElementById('mobile-menu').classList.add('hidden'); }); });
        
        const homeServicesContainer = document.getElementById('home-services-container');
        services.forEach(service => { const card = document.createElement('div'); card.className = 'card rounded-lg shadow-lg p-8 text-center hover:shadow-2xl transition-shadow duration-300'; card.innerHTML = `<div class="text-5xl mb-4">${service.icon}</div><h3 class="text-xl font-bold mb-2">${service.title}</h3><p class="text-[var(--brand-gray)]">${service.description}</p>`; homeServicesContainer.appendChild(card); });
        
        const detailedServicesContainer = document.getElementById('detailed-services-container');
        services.forEach((service, index) => { const section = document.createElement('section'); section.className = `grid md:grid-cols-2 gap-12 items-center py-10 ${index > 0 ? 'border-t' : ''} border-[var(--border-color)]`; section.innerHTML = `<div class="text-center md:text-left"><h3 class="text-3xl font-bold flex items-center justify-center md:justify-start"><span class="text-4xl mr-3">${service.icon}</span> ${service.title}</h3><p class="mt-4 text-lg text-[var(--brand-gray)]">${service.details}</p><button class="mt-6 text-white font-bold py-2 px-6 rounded-full cta-button !bg-[var(--brand-blue)] read-more-service-btn" data-service-id="${service.id}">En savoir plus</button></div><div class="p-2 rounded-lg shadow-xl card flex items-center justify-center"><img src="https://placehold.co/500x350/f1f5f9/1e293b?text=${service.title.replace(/ /g, '+')}" alt="${service.title}" class="rounded-lg"></div>`; detailedServicesContainer.appendChild(section); });
        
        const hubListContainer = document.getElementById('hub-list');
        blogPosts.forEach(post => { const card = document.createElement('div'); card.className = 'card rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300'; card.innerHTML = `<img src="${post.image}" alt="${post.title}" class="w-full h-48 object-cover"><div class="p-6"><h3 class="text-xl font-bold mb-2">${post.title}</h3><p class="text-[var(--brand-gray)] mb-4">${post.excerpt}</p><a href="#hub-article" class="font-bold text-[var(--brand-blue)] hover:underline read-more-link" data-post-id="${post.id}">Lire la suite →</a></div>`; hubListContainer.appendChild(card); });
        hubListContainer.addEventListener('click', (e) => { if (e.target.classList.contains('read-more-link')) { e.preventDefault(); const postId = parseInt(e.target.dataset.postId); const post = blogPosts.find(p => p.id === postId); renderArticle(post); showView('hub-article'); } });
        function renderArticle(post) { const container = document.getElementById('hub-article-view'); container.innerHTML = `<div class="w-full h-64 md:h-96 bg-cover bg-center" style="background-image: url('${post.image}')"></div><div class="container mx-auto px-6 py-12 max-w-4xl card"><h1 class="text-4xl md:text-5xl font-bold mb-4">${post.title}</h1><p class="text-lg text-[var(--brand-gray)] leading-relaxed mb-8">${post.content.replace(/\n/g, '<br>')}</p><a href="#hub" class="page-link font-bold text-[var(--brand-blue)] hover:underline">← Retour au Hub</a></div>`; container.querySelector('.page-link').addEventListener('click', (e) => { e.preventDefault(); showView('hub'); }); }

        // --- SERVICE MODAL LOGIC ---
        const serviceModal = document.getElementById('service-modal');
        const serviceModalBody = document.getElementById('service-modal-body');
        const serviceModalClose = document.getElementById('service-modal-close');
        const serviceModalOverlay = document.getElementById('service-modal-overlay');
        function openServiceModal(service) { if (!service) return; serviceModalBody.innerHTML = service.richDetails; serviceModal.classList.add('open'); }
        function closeServiceModal() { serviceModal.classList.remove('open'); }
        detailedServicesContainer.addEventListener('click', (e) => { if (e.target.classList.contains('read-more-service-btn')) { const serviceId = e.target.dataset.serviceId; const serviceData = services.find(s => s.id === serviceId); openServiceModal(serviceData); } });
        serviceModalClose.addEventListener('click', closeServiceModal);
        serviceModalOverlay.addEventListener('click', closeServiceModal);
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && serviceModal.classList.contains('open')) closeServiceModal(); });

        // --- HONEYCOMB DEVIS FORM LOGIC ---
        const devisFormContainer = document.getElementById('devis-form-container');
        if (devisFormContainer) {
            const honeycombGrid = document.getElementById('honeycomb-grid');
            const stepContainer = document.getElementById('honeycomb-step-container');
            const finalActionsContainer = document.getElementById('devis-final-actions');
            const mailtoBtn = document.getElementById('devis-mailto-btn');
            const whatsappBtn = document.getElementById('devis-whatsapp-btn');

            const formSteps = [
                { id: 'type', label: 'Type de Service', type: 'select', options: ['Particulier', 'Entreprise', 'International'], answered: false },
                { id: 'depart', label: 'Adresse de Départ', type: 'text', answered: false },
                { id: 'arrivee', label: 'Adresse d\'Arrivée', type: 'text', answered: false },
                { id: 'date', label: 'Date Souhaitée', type: 'date', answered: false },
                { id: 'details', label: 'Volume & Détails', type: 'textarea', answered: false },
                { id: 'nom', label: 'Votre Nom', type: 'text', answered: false },
                { id: 'contact', label: 'Email / Téléphone', type: 'text', answered: false },
            ];
            let formData = {};

            const renderHoneycomb = () => {
                honeycombGrid.innerHTML = '';
                stepContainer.innerHTML = '';
                formSteps.forEach(step => {
                    const cell = document.createElement('div');
                    cell.className = 'honeycomb-cell';
                    if (step.answered) cell.classList.add('answered');
                    cell.dataset.stepId = step.id;
                    cell.innerHTML = `<div class="hexagon"></div><div class="hex-content">${step.label}</div>`;
                    honeycombGrid.appendChild(cell);

                    const formStepEl = document.createElement('div');
                    formStepEl.id = `step-${step.id}`;
                    formStepEl.className = 'honeycomb-form-step';
                    let inputHtml = '';
                    if (step.type === 'select') {
                        inputHtml = `<select id="input-${step.id}" class="w-full p-3 rounded-lg input-field"><option value="">Choisir...</option>${step.options.map(o => `<option value="${o}">${o}</option>`).join('')}</select>`;
                    } else if (step.type === 'textarea') {
                        inputHtml = `<textarea id="input-${step.id}" class="w-full p-3 rounded-lg input-field" rows="4" placeholder="Ex: Appartement 3 pièces, 3ème étage..."></textarea>`;
                    } else {
                        inputHtml = `<input type="${step.type}" id="input-${step.id}" class="w-full p-3 rounded-lg input-field" placeholder="${step.label}">`;
                    }
                    formStepEl.innerHTML = `<h3 class="text-xl font-bold mb-4">${step.label}</h3>${inputHtml}<button class="mt-4 text-white font-bold py-2 px-5 rounded-full cta-button !bg-[var(--brand-blue)] next-step-btn" data-step-id="${step.id}">Valider et Suivant →</button>`;
                    stepContainer.appendChild(formStepEl);
                });
            };

            const showStep = (stepId) => {
                document.querySelectorAll('.honeycomb-form-step').forEach(el => el.classList.remove('active'));
                if (stepId) {
                    const nextStep = document.getElementById(`step-${stepId}`);
                    if (nextStep) nextStep.classList.add('active');
                }
            };

            const checkCompletion = () => {
                const allAnswered = formSteps.every(step => step.answered);
                if (allAnswered) {
                    finalActionsContainer.style.display = 'block';
                    showStep(null);
                    
                    // Prepare mailto and WhatsApp links
                    const emailBody = Object.entries(formData)
                        .map(([key, value]) => `${formSteps.find(s=>s.id===key).label}: ${value}`)
                        .join('%0D%0A'); // %0D%0A is newline for mailto
                    mailtoBtn.href = `mailto:devis@d3drone.com?subject=Nouvelle Demande de Devis - Mon Auxiliaire&body=${emailBody}`;

                    const whatsappMessage = `Bonjour, je souhaite un devis pour le déménagement suivant :%0A${emailBody}`;
                    whatsappBtn.href = `https://wa.me/33773163772?text=${whatsappMessage}`;
                }
            };
            
            honeycombGrid.addEventListener('click', (e) => { const cell = e.target.closest('.honeycomb-cell'); if (cell) showStep(cell.dataset.stepId); });

            stepContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('next-step-btn')) {
                    const stepId = e.target.dataset.stepId;
                    const input = document.getElementById(`input-${stepId}`);
                    if (input.value.trim() !== '') {
                        formData[stepId] = input.value;
                        const step = formSteps.find(s => s.id === stepId);
                        step.answered = true;
                        const currentStepIndex = formSteps.findIndex(s => s.id === stepId);
                        const nextStep = formSteps.find((s, index) => index > currentStepIndex && !s.answered);
                        renderHoneycomb();
                        showStep(nextStep ? nextStep.id : null);
                        checkCompletion();
                    }
                }
            });
            renderHoneycomb();
        }

        // --- MOBILE MENU ---
        document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));

        // --- CHATBOT WITH AI (unchanged) ---
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send');
        let conversationHistory = [];
        const addMessage = (message, sender) => { const messageElement = document.createElement('div'); messageElement.classList.add('chat-message', sender === 'bot' ? 'bot-message' : 'user-message'); messageElement.textContent = message; chatMessages.appendChild(messageElement); chatMessages.scrollTop = chatMessages.scrollHeight; };
        const showTypingIndicator = () => { const typingIndicator = document.createElement('div'); typingIndicator.id = 'typing-indicator'; typingIndicator.className = 'bot-message typing-indicator'; typingIndicator.innerHTML = '<span></span><span></span><span></span>'; chatMessages.appendChild(typingIndicator); chatMessages.scrollTop = chatMessages.scrollHeight; };
        const hideTypingIndicator = () => { const typingIndicator = document.getElementById('typing-indicator'); if (typingIndicator) { typingIndicator.remove(); } };
        const getBotResponse = async (userInput) => {
            showTypingIndicator();
            const apiKey = "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";
            conversationHistory.push({ role: "user", content: userInput });
            try {
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${apiKey}`, "Content-Type": "application/json" },
                    body: JSON.stringify({ "model": "mistralai/mistral-7b-instruct:free", "messages": [{ "role": "system", "content": "Tu es Alex, un assistant virtuel expert pour 'Mon Auxiliaire', une société de déménagement leader au Maroc. Ton ton est amical, professionnel et très serviable. Ton objectif principal est d'aider les utilisateurs et de les qualifier pour un devis. Pour ce faire, guide la conversation pour obtenir les informations suivantes : 1. Le type de service (particulier, entreprise, international). 2. La ville de départ et d'arrivée. 3. La date souhaitée. 4. Leur nom, email et numéro de téléphone pour leur envoyer un devis gratuit. Réponds aux questions générales sur l'entreprise, mais essaie toujours de revenir en douceur vers ton objectif de qualification. Ne dis jamais que tu es un modèle de langage. 'Mon Auxiliaire' a des agences à Tanger, Rabat, Casablanca, et Agadir." }, ...conversationHistory] })
                });
                if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }
                const data = await response.json();
                const botResponse = data.choices[0].message.content;
                conversationHistory.push({ role: "assistant", content: botResponse });
                hideTypingIndicator();
                addMessage(botResponse, 'bot');
            } catch (error) { console.error("Error fetching AI response:", error); hideTypingIndicator(); addMessage("Désolé, une erreur technique est survenue. Veuillez réessayer ou nous contacter directement par téléphone.", 'bot'); }
        };
        const handleUserInput = () => { const userText = chatInput.value.trim(); if (userText === "") return; addMessage(userText, 'user'); chatInput.value = ""; getBotResponse(userText); };
        chatbotToggle.addEventListener('click', () => { chatbotWindow.classList.toggle('open'); if (chatbotWindow.classList.contains('open') && conversationHistory.length === 0) { const welcomeMessage = "Bonjour ! Je suis Alex, votre assistant virtuel. Comment puis-je vous aider avec votre projet de déménagement ?"; addMessage(welcomeMessage, 'bot'); conversationHistory.push({ role: "assistant", content: welcomeMessage }); } });
        chatSend.addEventListener('click', handleUserInput);
        chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleUserInput(); });
    });
    </script>
</body>
</html>
